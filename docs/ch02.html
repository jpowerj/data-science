<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.243">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Data Science Without Fear - 2&nbsp; Data Science Workflow</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./ch03.html" rel="next">
<link href="./ch01.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" crossorigin="anonymous" referrerpolicy="no-referrer">


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./ch02.html">Data Science Fundamentals</a></li><li class="breadcrumb-item"><a href="./ch02.html"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Data Science Workflow</span></a></li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Data Science Without Fear</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preface</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ch01.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introduction</span></span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">Data Science Fundamentals</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ch02.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Data Science Workflow</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ch03.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Data Gathering and APIs</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
 <span class="menu-text">Data Cleaning and Analysis</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ch04.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Data Cleaning and Tidy Data</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ch05.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Exploratory Data Analysis</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">
 <span class="menu-text">Machine Learning Fundamentals</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ch06.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Optimization</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ch07.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Introduction to Classification</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true">
 <span class="menu-text">Machine Learning Algorithms</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ch08.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Classification Algorithms</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ch09.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Neural Networks</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ch10.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Unsupervised Learning and Clustering</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true">
 <span class="menu-text">Applications</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ch11.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Network Data</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ch12.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Image Data</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ch13.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Natural Language Processing</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ch14.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Summary</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="true">
 <span class="menu-text">Appendices</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./data-sources.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">A</span>&nbsp; <span class="chapter-title">Data Sources</span></span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#first-things-first-shell-commands" id="toc-first-things-first-shell-commands" class="nav-link active" data-scroll-target="#first-things-first-shell-commands"><span class="header-section-number">2.1</span> First Things First: Shell Commands</a></li>
  <li><a href="#r-and-python-for-data-science" id="toc-r-and-python-for-data-science" class="nav-link" data-scroll-target="#r-and-python-for-data-science"><span class="header-section-number">2.2</span> <code>R</code> and Python for Data Science</a></li>
  <li><a href="#python-pandas-and-numpy" id="toc-python-pandas-and-numpy" class="nav-link" data-scroll-target="#python-pandas-and-numpy"><span class="header-section-number">2.3</span> Python: Pandas and NumPy</a>
  <ul class="collapse">
  <li><a href="#dataframes-vs.-views-of-dataframes" id="toc-dataframes-vs.-views-of-dataframes" class="nav-link" data-scroll-target="#dataframes-vs.-views-of-dataframes"><span class="header-section-number">2.3.1</span> DataFrames vs.&nbsp;Views of DataFrames</a></li>
  <li><a href="#the-stack-and-the-heap" id="toc-the-stack-and-the-heap" class="nav-link" data-scroll-target="#the-stack-and-the-heap"><span class="header-section-number">2.3.2</span> The Stack and the Heap</a></li>
  <li><a href="#manipulating-a-dataframe" id="toc-manipulating-a-dataframe" class="nav-link" data-scroll-target="#manipulating-a-dataframe"><span class="header-section-number">2.3.3</span> Manipulating a DataFrame</a></li>
  </ul></li>
  <li><a href="#r-readr-tibbles-and-dplyr" id="toc-r-readr-tibbles-and-dplyr" class="nav-link" data-scroll-target="#r-readr-tibbles-and-dplyr"><span class="header-section-number">2.4</span> <code>R</code>: <code>readr</code>, Tibbles, and <code>dplyr</code></a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./ch02.html">Data Science Fundamentals</a></li><li class="breadcrumb-item"><a href="./ch02.html"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Data Science Workflow</span></a></li></ol></nav>
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Data Science Workflow</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>

<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>You are viewing a <strong>draft version</strong> of <em>Data Science Without Fear</em> – materials here are subject to change at any point!</p>
</div>
</div>
<div class="hidden">
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">1948</span>)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span>opts_template<span class="sc">$</span><span class="fu">set</span>(</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">tikz_settings =</span> <span class="fu">list</span>(</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">fig.ext =</span> <span class="st">"svg"</span>,</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>        <span class="at">fig.align =</span> <span class="st">"center"</span>,</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>        <span class="at">engine.opts =</span> <span class="fu">list</span>(<span class="at">dvisvgm.opts =</span> <span class="st">"--font-format=woff"</span>)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">tikz_settings_fancy =</span> <span class="fu">list</span>(</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>        <span class="at">fig.ext =</span> <span class="st">"svg"</span>,</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>        <span class="at">fig.align =</span> <span class="st">"center"</span>,</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>        <span class="at">engine.opts =</span> <span class="fu">list</span>(</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>            <span class="at">dvisvgm.opts =</span> <span class="st">"--font-format=woff"</span>,</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>            <span class="at">template =</span> <span class="st">"./assets/code/tikz2pdf.tex"</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>disp <span class="ot">&lt;-</span> <span class="cf">function</span>(df, <span class="at">obs_per_page =</span> <span class="dv">6</span>, <span class="at">custom_callback =</span> <span class="cn">NULL</span>, ...) {</span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>    <span class="co"># If length of df is less than obs_per_page, disable pagination</span></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>    dom_str <span class="ot">&lt;-</span> <span class="st">"tp"</span></span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="fu">nrow</span>(df) <span class="sc">&lt;=</span> obs_per_page) {</span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a>        dom_str <span class="ot">&lt;-</span> <span class="st">"t"</span></span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(DT<span class="sc">::</span><span class="fu">datatable</span>(</span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a>        df,</span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a>        <span class="at">extensions =</span> <span class="fu">c</span>(<span class="st">"FixedColumns"</span>, <span class="st">"FixedHeader"</span>),</span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a>        <span class="at">options =</span> <span class="fu">list</span>(</span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a>            <span class="at">pageLength =</span> obs_per_page,</span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a>            <span class="at">scrollX =</span> <span class="cn">TRUE</span>,</span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a>            <span class="at">paging =</span> <span class="cn">TRUE</span>,</span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a>            <span class="at">dom =</span> dom_str,</span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true" tabindex="-1"></a>            <span class="at">fixedHeader =</span> <span class="cn">TRUE</span>,</span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true" tabindex="-1"></a>            <span class="at">filter =</span> <span class="cn">FALSE</span>,</span>
<span id="cb1-33"><a href="#cb1-33" aria-hidden="true" tabindex="-1"></a>            <span class="at">ordering =</span> <span class="cn">FALSE</span>,</span>
<span id="cb1-34"><a href="#cb1-34" aria-hidden="true" tabindex="-1"></a>            <span class="at">language =</span> <span class="fu">list</span>(</span>
<span id="cb1-35"><a href="#cb1-35" aria-hidden="true" tabindex="-1"></a>                <span class="st">"paginate"</span> <span class="ot">=</span> <span class="fu">list</span>(</span>
<span id="cb1-36"><a href="#cb1-36" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"previous"</span> <span class="ot">=</span> <span class="st">"&lt;i class='bi bi-chevron-left'&gt;&lt;/i&gt;"</span>,</span>
<span id="cb1-37"><a href="#cb1-37" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"next"</span> <span class="ot">=</span> <span class="st">"&lt;i class='bi bi-chevron-right'&gt;&lt;/i&gt;"</span></span>
<span id="cb1-38"><a href="#cb1-38" aria-hidden="true" tabindex="-1"></a>                )</span>
<span id="cb1-39"><a href="#cb1-39" aria-hidden="true" tabindex="-1"></a>            ),</span>
<span id="cb1-40"><a href="#cb1-40" aria-hidden="true" tabindex="-1"></a>            <span class="at">callback =</span> custom_callback</span>
<span id="cb1-41"><a href="#cb1-41" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb1-42"><a href="#cb1-42" aria-hidden="true" tabindex="-1"></a>    ))</span>
<span id="cb1-43"><a href="#cb1-43" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1-44"><a href="#cb1-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-45"><a href="#cb1-45" aria-hidden="true" tabindex="-1"></a><span class="co"># library(knitr)</span></span>
<span id="cb1-46"><a href="#cb1-46" aria-hidden="true" tabindex="-1"></a><span class="do">## define a method for objects of the class data.frame</span></span>
<span id="cb1-47"><a href="#cb1-47" aria-hidden="true" tabindex="-1"></a><span class="co"># knit_print.data.frame &lt;- function(x, ...) {</span></span>
<span id="cb1-48"><a href="#cb1-48" aria-hidden="true" tabindex="-1"></a><span class="co">#    #res &lt;- paste(c("", "", disp(x)), collapse = "\n")</span></span>
<span id="cb1-49"><a href="#cb1-49" aria-hidden="true" tabindex="-1"></a><span class="co">#    asis_output(disp(x))</span></span>
<span id="cb1-50"><a href="#cb1-50" aria-hidden="true" tabindex="-1"></a><span class="co"># }</span></span>
<span id="cb1-51"><a href="#cb1-51" aria-hidden="true" tabindex="-1"></a><span class="do">## register the method</span></span>
<span id="cb1-52"><a href="#cb1-52" aria-hidden="true" tabindex="-1"></a><span class="co"># registerS3method("knit_print", "data.frame", knit_print.data.frame)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div class="hidden">
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># For slides</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>cbPalette <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"#E69F00"</span>, <span class="st">"#56B4E9"</span>, <span class="st">"#009E73"</span>, <span class="st">"#F0E442"</span>, <span class="st">"#0072B2"</span>, <span class="st">"#D55E00"</span>, <span class="st">"#CC79A7"</span>)</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(<span class="at">ggplot2.discrete.colour =</span> cbPalette)</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Theme generator, for given sizes</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>dsan_theme <span class="ot">&lt;-</span> <span class="cf">function</span>(<span class="at">plot_type =</span> <span class="st">"full"</span>) {</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (plot_type <span class="sc">==</span> <span class="st">"full"</span>) {</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>        custom_base_size <span class="ot">&lt;-</span> <span class="dv">16</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> <span class="cf">if</span> (plot_type <span class="sc">==</span> <span class="st">"half"</span>) {</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>        custom_base_size <span class="ot">&lt;-</span> <span class="dv">22</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> <span class="cf">if</span> (plot_type <span class="sc">==</span> <span class="st">"quarter"</span>) {</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>        custom_base_size <span class="ot">&lt;-</span> <span class="dv">28</span></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>        <span class="co"># plot_type == "col"</span></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>        custom_base_size <span class="ot">&lt;-</span> <span class="dv">22</span></span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>    theme <span class="ot">&lt;-</span> <span class="fu">theme_classic</span>(<span class="at">base_size =</span> custom_base_size) <span class="sc">+</span></span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>        <span class="fu">theme</span>(</span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>            <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a>            <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a>            <span class="at">legend.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a>            <span class="at">legend.box.background =</span> <span class="fu">element_rect</span>(<span class="at">colour =</span> <span class="st">"black"</span>)</span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(theme)</span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span>opts_chunk<span class="sc">$</span><span class="fu">set</span>(<span class="at">fig.align =</span> <span class="st">"center"</span>)</span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true" tabindex="-1"></a>g_pointsize <span class="ot">&lt;-</span> <span class="dv">5</span></span>
<span id="cb2-29"><a href="#cb2-29" aria-hidden="true" tabindex="-1"></a>g_linesize <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb2-30"><a href="#cb2-30" aria-hidden="true" tabindex="-1"></a><span class="co"># Technically it should always be linewidth</span></span>
<span id="cb2-31"><a href="#cb2-31" aria-hidden="true" tabindex="-1"></a>g_linewidth <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb2-32"><a href="#cb2-32" aria-hidden="true" tabindex="-1"></a>g_textsize <span class="ot">&lt;-</span> <span class="dv">14</span></span>
<span id="cb2-33"><a href="#cb2-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-34"><a href="#cb2-34" aria-hidden="true" tabindex="-1"></a>remove_legend_title <span class="ot">&lt;-</span> <span class="cf">function</span>() {</span>
<span id="cb2-35"><a href="#cb2-35" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="fu">theme</span>(</span>
<span id="cb2-36"><a href="#cb2-36" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.title =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb2-37"><a href="#cb2-37" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.spacing.y =</span> <span class="fu">unit</span>(<span class="dv">0</span>, <span class="st">"mm"</span>)</span>
<span id="cb2-38"><a href="#cb2-38" aria-hidden="true" tabindex="-1"></a>    ))</span>
<span id="cb2-39"><a href="#cb2-39" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<!-- <a href="./ch02.slides.html" target="_blank" class="h3">Open slides for chapter in new window &rarr;</a>



```{=html}
<iframe src="./ch02.slides.html" width="100%" height="400"></iframe>
``` -->
<p>At the end of the previous chapter we learned how to install <code>R</code> and Python. <strong>Both</strong> of these languages are central pieces of the data scientist’s toolkit, so throughout this book we will aim to build your skills in both, while highlighting tasks that may be easier to carry out in one language relative to the other.<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a> Therefore, while we will mark sections with <i class="fa-brands fa-python"></i> if they contain details specific to Python and with <i class="fa-brands fa-r-project"></i> if they contain details specific to <code>R</code>, throughout the book we will include both <code>R</code> and Python versions of each main topic’s code examples, separated using tabs like:</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true" aria-current="page">Python</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false">R</a></li></ul>
<div class="tab-content">
<div id="tabset-1-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<div class="cell" data-layout-align="center">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>rng <span class="op">=</span> np.random.default_rng(seed<span class="op">=</span><span class="dv">1948</span>)</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> rng.normal(<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">10</span>)</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>y <span class="op">=</span> rng.normal(<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">10</span>)</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.DataFrame({<span class="st">'x'</span>: x, <span class="st">'y'</span>: y})</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>sns.scatterplot(x<span class="op">=</span><span class="st">'x'</span>, y<span class="op">=</span><span class="st">'y'</span>, data<span class="op">=</span>df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="ch02_files/figure-html/py-tabset-example-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-1-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-2-tab">
<div class="cell" data-layout-align="center">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tibble)</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(<span class="dv">10</span>, <span class="dv">0</span>, <span class="dv">1</span>)</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(<span class="dv">10</span>, <span class="dv">0</span>, <span class="dv">1</span>)</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">x=</span>x, <span class="at">y=</span>y)</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(df, <span class="fu">aes</span>(<span class="at">x=</span>x, <span class="at">y=</span>y)) <span class="sc">+</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> g_pointsize) <span class="sc">+</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dsan_theme</span>(<span class="st">"full"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="ch02_files/figure-html/r-tabset-example-3.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
<section id="first-things-first-shell-commands" class="level2" data-number="2.1">
<h2 data-number="2.1" class="anchored" data-anchor-id="first-things-first-shell-commands"><span class="header-section-number">2.1</span> First Things First: Shell Commands</h2>
<p>Oftentimes, given the association of data science with programming languages, your first instinct when starting a data science project will be to create an <code>R</code> or Python file. For the sake of building effective data science habits, however, you should ask yourself if the task you’re trying to accomplish could be done more simply using shell commands. <span class="citation" data-cites="jurafsky_speech_2023">Jurafsky and Martin (<a href="references.html#ref-jurafsky_speech_2023" role="doc-biblioref">2023</a>)</span>, for example, one of the most widely-used Natural Language Processing textbooks, introduces the concept of text normalization using Unix commands rather than Python or <code>R</code>. Demonstrating how Unix can quickly (usually far more quickly than <code>R</code> or Python, for simpler tasks like this) process text corpora, they take a text file <code>sh.txt</code> containing the complete works of Shakespeare and use the following Unix command</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tr</span> <span class="at">-sc</span> <span class="st">'A-Za-z'</span> <span class="st">'\n'</span> <span class="op">&lt;</span> sh.txt <span class="kw">|</span> <span class="fu">tr</span> A-Z a-z <span class="kw">|</span> <span class="fu">sort</span> <span class="kw">|</span> <span class="fu">uniq</span> <span class="at">-c</span> <span class="kw">|</span> <span class="fu">sort</span> <span class="at">-n</span> <span class="at">-r</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>to discover the ten most frequently-occurring words across Shakespeare’s works:</p>
<pre><code>27378 the
26084 and
22538 i
19771 to
17481 of
14725 a
13826 you
12489 my
11318 that
11112 in</code></pre>
<p>In the case of data science in general, simple operations like <strong>creating, moving, and copying files</strong>, <strong>downloading files from the internet</strong>, and <strong>searching for particular phrases or expressions</strong> across your entire disk or within a particular directory are all tasks that can be carried out easily and effectively using a small set of Unix commands.</p>
</section>
<section id="r-and-python-for-data-science" class="level2" data-number="2.2">
<h2 data-number="2.2" class="anchored" data-anchor-id="r-and-python-for-data-science"><span class="header-section-number">2.2</span> <code>R</code> and Python for Data Science</h2>
<p>When it comes to learning the basics of <code>R</code>, Python, or any other programming language, we believe that there’s no need for us to reinvent the wheel—there are thousands of incredible resources available for free on the internet that can do a better job of teaching the fundamentals of these languages better than we ever could. If you don’t feel comfortable in terms of programming experience, we recommend the following resources in particular (which you can work through and then return to the book!):</p>
<ul>
<li><a href="https://www.datacamp.com/" target="_blank">DataCamp</a></li>
<li><a href="https://www.codecademy.com/" target="_blank">Codecademy</a></li>
</ul>
<p>Whether or not you have this background knowledge, don’t worry! We will still work to make sure that we explain new concepts with as little technical jargon as possible throughout.</p>
</section>
<section id="python-pandas-and-numpy" class="level2" data-number="2.3">
<h2 data-number="2.3" class="anchored" data-anchor-id="python-pandas-and-numpy"><span class="header-section-number">2.3</span> Python: Pandas and NumPy</h2>
<p>While <code>R</code> has a range of libraries that are helpful for reading, manipulating, and analyzing data, in Python two particular libraries stand above the rest: Pandas and NumPy. After installing them on the command-line using</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="ex">pip</span> install pandas</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="ex">pip</span> install numpy</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>you’ll be able to import and start using them by including the following at the top of your code:</p>
<div class="cell" data-layout-align="center">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Note that the syntax here, <code>import &lt;x&gt; as &lt;y&gt;</code>, tells Python that you want to import the library whose full name is <code>&lt;x&gt;</code>, but that in your code you’d like to <strong>reference</strong> this imported library using the shorthand <code>&lt;y&gt;</code>.</p>
<div class="callout callout-style-default callout-tip callout-titled" title="Importing Pandas and NumPy">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Importing Pandas and NumPy
</div>
</div>
<div class="callout-body-container callout-body">
<p>It is standard practice in data science to use this shorthand—<code>pd</code> to refer to <code>pandas</code> and <code>np</code> to refer to <code>numpy</code>—when importing the two libraries. This practice will help immensely when e.g.&nbsp;searching the web for errors in the functions you’re using (since those functions will be written as <code>pd.&lt;function&gt;</code>)</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<p>Once you have imported these libraries, a standard data science workflow for opening a data file and viewing its contents looks like:</p>
<div class="cell" data-layout-align="center">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.read_csv(<span class="st">"./assets/data/ch02/mydata.csv"</span>)</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>df.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>  index   var_1   var_2   var_3
0     A  val_A1  val_A2  val_A3
1     B  val_B1  val_B2  val_B3
2     C  val_C1  val_C2  val_C3</code></pre>
</div>
</div>
<p>We can then perform an operation on our data, like dropping the first row, and use <code>head()</code> again to make sure the code did what we expected it to do to our DataFrame:</p>
<div class="cell" data-layout-align="center">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> df.iloc[<span class="dv">1</span>:].copy()</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>df.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>  index   var_1   var_2   var_3
1     B  val_B1  val_B2  val_B3
2     C  val_C1  val_C2  val_C3</code></pre>
</div>
</div>
<section id="dataframes-vs.-views-of-dataframes" class="level3" data-number="2.3.1">
<h3 data-number="2.3.1" class="anchored" data-anchor-id="dataframes-vs.-views-of-dataframes"><span class="header-section-number">2.3.1</span> DataFrames vs.&nbsp;Views of DataFrames</h3>
<p>Probably the most frequent source of errors, over all of the data science couses we’ve taught, has been Pandas’ distinction between a DataFrame itself and a <strong>view</strong> of a DataFrame. There is a good reason for the distinction, but it is typically a baffling concept for anyone just starting to work with DataFrames. To understand this distinction, we first need to quickly look at the structure of how <strong>objects</strong> are stored in memory (this is how storage works in general—in Python, <code>R</code>, or any other programming language—so it’s useful knowledge regardless of what particular corner of the data science world you occupy!).</p>
</section>
<section id="the-stack-and-the-heap" class="level3" data-number="2.3.2">
<h3 data-number="2.3.2" class="anchored" data-anchor-id="the-stack-and-the-heap"><span class="header-section-number">2.3.2</span> The Stack and the Heap</h3>
<p>Let’s look at what happens, in the computer’s memory, when we run the following code:</p>
<div class="cell" data-layout-align="center">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> datetime</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>country_df <span class="op">=</span> pd.read_csv(<span class="st">"./assets/data/ch02/country_pop.csv"</span>)</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>pop_col <span class="op">=</span> country_df[<span class="st">'pop'</span>]</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>num_rows <span class="op">=</span> <span class="bu">len</span>(country_df)</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>filled <span class="op">=</span> <span class="bu">all</span>(<span class="op">~</span>pd.isna(country_df))</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>alg_row <span class="op">=</span> country_df.loc[country_df[<span class="st">'name'</span>] <span class="op">==</span> <span class="st">"Algeria"</span>]</span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>num_cols <span class="op">=</span> <span class="bu">len</span>(country_df.columns)</span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>username <span class="op">=</span> <span class="st">"Jeff"</span></span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>cur_date <span class="op">=</span> datetime.datetime.now()</span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a>i <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a>j <span class="op">=</span> <span class="va">None</span></span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a>z <span class="op">=</span> <span class="dv">314</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>And let’s look at the values Python prints out when we ask it to print some of these variables. First, the whole DataFrame, <code>country_df</code>:</p>
<div class="cell" data-layout-align="center">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>country_df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>      name   pop
0  Albania   2.8
1  Algeria  44.2
2   Angola  34.5</code></pre>
</div>
</div>
<p>Next, <code>pop_col</code>:</p>
<div class="cell" data-layout-align="center">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>pop_col</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>0     2.8
1    44.2
2    34.5
Name: pop, dtype: float64</code></pre>
</div>
</div>
<p>How about <code>alg_row</code>?</p>
<div class="cell" data-layout-align="center">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>alg_row</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>      name   pop
1  Algeria  44.2</code></pre>
</div>
</div>
<p>These three variables <code>country_df</code>, <code>pop_col</code>, and <code>alg_row</code> may seem like they are three separate, entirely distinct entities in the computer’s memory. After all, we gave them three different names, right? Let’s look at how this situation would be represented <strong>in the computer’s memory</strong>, however:</p>
<div class="cell">
<div class="cell-output-display">
<div>
<div>
<svg width="672" height="480" viewbox="0.00 0.00 499.54 380.00" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" style="; max-width: none; max-height: none">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 376)">
<title>g</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-376 495.54,-376 495.54,4 -4,4"></polygon>
<g id="clust1" class="cluster">
<title>clusterG0</title>
<polygon fill="none" stroke="black" points="8,-8 8,-364 483.54,-364 483.54,-8 8,-8"></polygon>
<text text-anchor="middle" x="245.77" y="-347.4" font-family="Times,serif" font-size="14.00">Memory (After Code Execution)</text>
</g>
<g id="clust2" class="cluster">
<title>clusterG1</title>
<polygon fill="none" stroke="black" points="16,-16 16,-331 232.03,-331 232.03,-16 16,-16"></polygon>
<text text-anchor="middle" x="124.01" y="-314.4" font-family="Times,serif" font-size="14.00">Stack</text>
</g>
<g id="clust3" class="cluster">
<title>clusterG2</title>
<polygon fill="none" stroke="black" points="252.03,-18 252.03,-331 475.54,-331 475.54,-18 252.03,-18"></polygon>
<text text-anchor="middle" x="363.79" y="-314.4" font-family="Times,serif" font-size="14.00">Heap</text>
</g>
<g id="clust4" class="cluster">
<title>clusterG20</title>
<polygon fill="none" stroke="black" points="293.88,-126 293.88,-298 433.69,-298 433.69,-126 293.88,-126"></polygon>
</g>
<!-- stvars -->
<g id="node1" class="node">
<title>stvars</title>
<polygon fill="none" stroke="black" points="24,-24.6 24,-297.4 224.03,-297.4 224.03,-24.6 24,-24.6"></polygon>
<text text-anchor="middle" x="74.01" y="-280.8" font-family="Courier,monospace" font-size="14.00">country_df</text>
<polyline fill="none" stroke="black" points="24,-272.6 124.01,-272.6 "></polyline>
<text text-anchor="middle" x="74.01" y="-256" font-family="Courier,monospace" font-size="14.00">pop_col</text>
<polyline fill="none" stroke="black" points="24,-247.8 124.01,-247.8 "></polyline>
<text text-anchor="middle" x="74.01" y="-231.2" font-family="Courier,monospace" font-size="14.00">num_rows</text>
<polyline fill="none" stroke="black" points="24,-223 124.01,-223 "></polyline>
<text text-anchor="middle" x="74.01" y="-206.4" font-family="Courier,monospace" font-size="14.00">filled</text>
<polyline fill="none" stroke="black" points="24,-198.2 124.01,-198.2 "></polyline>
<text text-anchor="middle" x="74.01" y="-181.6" font-family="Courier,monospace" font-size="14.00">alg_row</text>
<polyline fill="none" stroke="black" points="24,-173.4 124.01,-173.4 "></polyline>
<text text-anchor="middle" x="74.01" y="-156.8" font-family="Courier,monospace" font-size="14.00">num_cols</text>
<polyline fill="none" stroke="black" points="24,-148.6 124.01,-148.6 "></polyline>
<text text-anchor="middle" x="74.01" y="-132" font-family="Courier,monospace" font-size="14.00">username</text>
<polyline fill="none" stroke="black" points="24,-123.8 124.01,-123.8 "></polyline>
<text text-anchor="middle" x="74.01" y="-107.2" font-family="Courier,monospace" font-size="14.00">cur_date</text>
<polyline fill="none" stroke="black" points="24,-99 124.01,-99 "></polyline>
<text text-anchor="middle" x="74.01" y="-82.4" font-family="Courier,monospace" font-size="14.00">i</text>
<polyline fill="none" stroke="black" points="24,-74.2 124.01,-74.2 "></polyline>
<text text-anchor="middle" x="74.01" y="-57.6" font-family="Courier,monospace" font-size="14.00">j</text>
<polyline fill="none" stroke="black" points="24,-49.4 124.01,-49.4 "></polyline>
<text text-anchor="middle" x="74.01" y="-32.8" font-family="Courier,monospace" font-size="14.00">z</text>
<polyline fill="none" stroke="black" points="124.01,-24.6 124.01,-297.4 "></polyline>
<text text-anchor="middle" x="174.02" y="-280.8" font-family="Courier,monospace" font-size="14.00">0x03a80afc</text>
<polyline fill="none" stroke="black" points="124.01,-272.6 224.03,-272.6 "></polyline>
<text text-anchor="middle" x="174.02" y="-256" font-family="Courier,monospace" font-size="14.00">0x10ba8</text>
<polyline fill="none" stroke="black" points="124.01,-247.8 224.03,-247.8 "></polyline>
<text text-anchor="middle" x="174.02" y="-231.2" font-family="Courier,monospace" font-size="14.00">13</text>
<polyline fill="none" stroke="black" points="124.01,-223 224.03,-223 "></polyline>
<text text-anchor="middle" x="174.02" y="-206.4" font-family="Courier,monospace" font-size="14.00">TRUE</text>
<polyline fill="none" stroke="black" points="124.01,-198.2 224.03,-198.2 "></polyline>
<text text-anchor="middle" x="174.02" y="-181.6" font-family="Courier,monospace" font-size="14.00">0xf7fc4380</text>
<polyline fill="none" stroke="black" points="124.01,-173.4 224.03,-173.4 "></polyline>
<text text-anchor="middle" x="174.02" y="-156.8" font-family="Courier,monospace" font-size="14.00">2</text>
<polyline fill="none" stroke="black" points="124.01,-148.6 224.03,-148.6 "></polyline>
<text text-anchor="middle" x="174.02" y="-132" font-family="Courier,monospace" font-size="14.00">0xf7fc43e0</text>
<polyline fill="none" stroke="black" points="124.01,-123.8 224.03,-123.8 "></polyline>
<text text-anchor="middle" x="174.02" y="-107.2" font-family="Courier,monospace" font-size="14.00">8ec3d9889</text>
<polyline fill="none" stroke="black" points="124.01,-99 224.03,-99 "></polyline>
<text text-anchor="middle" x="174.02" y="-82.4" font-family="Courier,monospace" font-size="14.00">0</text>
<polyline fill="none" stroke="black" points="124.01,-74.2 224.03,-74.2 "></polyline>
<text text-anchor="middle" x="174.02" y="-57.6" font-family="Courier,monospace" font-size="14.00">NULL</text>
<polyline fill="none" stroke="black" points="124.01,-49.4 224.03,-49.4 "></polyline>
<text text-anchor="middle" x="174.02" y="-32.8" font-family="Courier,monospace" font-size="14.00">314</text>
</g>
<!-- h0 -->
<g id="node2" class="node">
<title>h0</title>
<polygon fill="none" stroke="black" stroke-width="0" points="305.84,-253 305.84,-289 421.74,-289 421.74,-253 305.84,-253"></polygon>
<text text-anchor="middle" x="363.79" y="-266.9" font-family="Times,serif" font-size="14.00">DataFrame object</text>
</g>
<!-- stvars&#45;&gt;h0 -->
<g id="edge1" class="edge">
<title>stvars:addr0-&gt;h0:d0</title>
<path fill="none" stroke="black" d="M225.01,-285C248.01,-285 273.04,-283.07 295.43,-280.65"></path>
<polygon fill="black" stroke="black" points="295.97,-284.11 305.51,-279.51 295.18,-277.16 295.97,-284.11"></polygon>
</g>
<!-- h1 -->
<g id="node3" class="node">
<title>h1</title>
<polygon fill="none" stroke="black" points="301.88,-134.4 301.88,-233.6 425.69,-233.6 425.69,-134.4 301.88,-134.4"></polygon>
<text text-anchor="middle" x="313.38" y="-217" font-family="Times,serif" font-size="14.00"> </text>
<polyline fill="none" stroke="black" points="301.88,-208.8 324.88,-208.8 "></polyline>
<text text-anchor="middle" x="313.38" y="-192.2" font-family="Times,serif" font-size="14.00">0</text>
<polyline fill="none" stroke="black" points="301.88,-184 324.88,-184 "></polyline>
<text text-anchor="middle" x="313.38" y="-167.4" font-family="Times,serif" font-size="14.00">1</text>
<polyline fill="none" stroke="black" points="301.88,-159.2 324.88,-159.2 "></polyline>
<text text-anchor="middle" x="313.38" y="-142.6" font-family="Times,serif" font-size="14.00">2</text>
<polyline fill="none" stroke="black" points="324.88,-134.4 324.88,-233.6 "></polyline>
<text text-anchor="middle" x="355.04" y="-217" font-family="Times,serif" font-size="14.00">name</text>
<polyline fill="none" stroke="black" points="324.88,-208.8 385.19,-208.8 "></polyline>
<text text-anchor="middle" x="355.04" y="-192.2" font-family="Times,serif" font-size="14.00">Albania</text>
<polyline fill="none" stroke="black" points="324.88,-184 385.19,-184 "></polyline>
<text text-anchor="middle" x="355.04" y="-167.4" font-family="Times,serif" font-size="14.00">Algeria</text>
<polyline fill="none" stroke="black" points="324.88,-159.2 385.19,-159.2 "></polyline>
<text text-anchor="middle" x="355.04" y="-142.6" font-family="Times,serif" font-size="14.00">Angola</text>
<polyline fill="none" stroke="black" points="385.19,-134.4 385.19,-233.6 "></polyline>
<text text-anchor="middle" x="405.44" y="-217" font-family="Times,serif" font-size="14.00">pop</text>
<polyline fill="none" stroke="black" points="385.19,-208.8 425.69,-208.8 "></polyline>
<text text-anchor="middle" x="405.44" y="-192.2" font-family="Times,serif" font-size="14.00">2.8</text>
<polyline fill="none" stroke="black" points="385.19,-184 425.69,-184 "></polyline>
<text text-anchor="middle" x="405.44" y="-167.4" font-family="Times,serif" font-size="14.00">44.2</text>
<polyline fill="none" stroke="black" points="385.19,-159.2 425.69,-159.2 "></polyline>
<text text-anchor="middle" x="405.44" y="-142.6" font-family="Times,serif" font-size="14.00">34.5</text>
</g>
<!-- stvars&#45;&gt;h1 -->
<g id="edge2" class="edge">
<title>stvars:addr1-&gt;h1:g5</title>
<path fill="none" stroke="black" stroke-dasharray="5,2" d="M225.01,-260C238.97,-260 238.68,-248.08 252.03,-244 258.93,-241.89 363.65,-243.03 396.2,-238.29"></path>
<polygon fill="black" stroke="black" points="397.46,-241.56 405.79,-235 395.19,-234.94 397.46,-241.56"></polygon>
</g>
<!-- stvars&#45;&gt;h1 -->
<g id="edge3" class="edge">
<title>stvars:f4-&gt;h1:g2</title>
<path fill="none" stroke="black" stroke-dasharray="5,2" d="M225.01,-186C255.65,-186 264.7,-174.8 290.79,-172.43"></path>
<polygon fill="black" stroke="black" points="290.95,-175.93 300.79,-172 290.64,-168.94 290.95,-175.93"></polygon>
</g>
<!-- h3 -->
<g id="node4" class="node">
<title>h3</title>
<ellipse fill="none" stroke="black" stroke-width="0" cx="363.79" cy="-98" rx="45.62" ry="18"></ellipse>
<text text-anchor="middle" x="363.79" y="-93.8" font-family="Courier,monospace" font-size="14.00">"Jeff"</text>
</g>
<!-- stvars&#45;&gt;h3 -->
<g id="edge4" class="edge">
<title>stvars:f6-&gt;h3</title>
<path fill="none" stroke="black" d="M225.01,-136C238.54,-136 239.31,-126.58 252.03,-122 270.78,-115.25 292.03,-110.08 310.87,-106.3"></path>
<polygon fill="black" stroke="black" points="311.61,-109.72 320.77,-104.4 310.28,-102.85 311.61,-109.72"></polygon>
</g>
<!-- h4 -->
<g id="node5" class="node">
<title>h4</title>
<ellipse fill="none" stroke="black" stroke-width="0" cx="363.79" cy="-44" rx="103.52" ry="18"></ellipse>
<text text-anchor="middle" x="363.79" y="-39.8" font-family="Courier,monospace" font-size="14.00">Date[2023-07-22]</text>
</g>
<!-- stvars&#45;&gt;h4 -->
<g id="edge5" class="edge">
<title>stvars:f7-&gt;h4</title>
<path fill="none" stroke="black" d="M225.01,-111C246.47,-111 234.42,-83.25 252.03,-71 258.92,-66.21 266.56,-62.26 274.53,-59.01"></path>
<polygon fill="black" stroke="black" points="275.83,-62.26 283.99,-55.51 273.4,-55.7 275.83,-62.26"></polygon>
</g>
</g>
</svg>
</div>
</div>
</div>
</div>
<p>The Python interpreter did something smart: when we asked it to create a variable called <code>pop_col</code> containing just that column of the full DataFrame, and a variable called <code>alg_row</code> for just one row of the full DataFrame, it knew that it didn’t have to construct two entirely new objects in its memory. Instead, since it knows that <code>country_df</code> contains all of the data that <code>pop_col</code> and <code>alg_row</code> are subsetting, in its box for <code>pop_col</code> it just stored a <strong>pointer</strong>, pointing to that particular column, rather than an entirely new object built from scratch (in other words, an object for which we’d have to ask the computer to allocate more storage space for us). And similarly, its box for <code>alg_row</code> just contains a pointer to that particular row.</p>
<p>Disaster strikes, however, if we modify <code>country_df</code> without realizing that this will therefore also modify <code>pop_col</code> and <code>alg_row</code>, since these simply point to specific pieces of <code>country_df</code>.</p>
<p>A straightforward and effective way to avoid this disaster is by thinking about whether or not you need to <strong>persist</strong> a particular variable in memory, and whether you’d like to manipulate it <strong>separately from</strong> the main DataFrame you’re working with. So in our case, if we knew that we wanted to do something to <code>pop_col</code> (say, rescale all the populations to be in units of people rather than millions of people), we could save ourselves a huge headache by writing</p>
<div class="cell" data-layout-align="center">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>pop_col <span class="op">=</span> country_df[<span class="st">'pop'</span>].copy()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Now that we’ve told Python that we want a <strong>copy</strong> of the column, not just a pointer to a piece of <code>country_df</code>, we can do whatever we want to <code>country_df</code> and/or <code>pop_col</code> without having to worry about whether changes to one will affect the other.</p>
<p>Most commonly, however, this issue comes about in the following way: when we ask Pandas to perform some <strong>operation</strong> on our DataFrame, typically we glance at the resulting output from the code, see that it looks correct, and move on. You need to train your brain to intervene when you fall into this habit! Instead, you also need to check that the operation was <strong>permanent</strong>—i.e., that it was performed <strong>in-place</strong> rather than <strong>as a copy</strong>. To see what we mean, let’s try sorting the values in <code>country_df</code> by population, instead of alphabetically:</p>
<div class="cell" data-layout-align="center">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>country_df.sort_values(by<span class="op">=</span><span class="st">'pop'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>      name   pop
0  Albania   2.8
2   Angola  34.5
1  Algeria  44.2</code></pre>
</div>
</div>
<p>All good, right? No! Stop yourself here! Our brains naturally want to move on once we’ve visually observed the above output: cool, we’re good, I see it and it’s sorted, onto the next task. But the issue is that, <strong>by default</strong>, Pandas shows us the result of an operation by returning a <strong>copy</strong> of the original DataFrame with the operation performed, <strong>not</strong> the original DataFrame itself. Basically, you can think of this like when you make a change to some file and your computer asks you “would you like to save these changes?” <strong>By default, Pandas is showing you the changes, and it is your job to SAVE these changes</strong> if you want to use the post-operation DataFrame later on in your code. If you don’t, then despite the output of the above code <em>looking</em> correct, the DataFrame will revert to its previous, non-sorted state from the next line of code onwards:</p>
<div class="cell" data-layout-align="center">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>country_df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>      name   pop
0  Albania   2.8
1  Algeria  44.2
2   Angola  34.5</code></pre>
</div>
</div>
<p>Like the <code>.copy()</code> function above, the most straightforward way to avoid this issue is by using the argument that can be passed to most Pandas functions: <code>inplace</code>. As discussed above, the default value is <code>False</code>: the changes are <strong>not</strong> made to the original DataFrame, but to a copy of it. If you specify <code>inplace=True</code>, however, your problem is solved: this tells Pandas that you’d like the operation to be <strong>permanent</strong>, so that e.g., using our <code>sort_values()</code> example from above, <code>country_df</code> will now be sorted by population when subsequent lines of code are executed! Let’s look at the difference, examining not the output of <code>sort_values()</code> itself but the state of the DataFrame <code>country_df</code> after <code>sort_values()</code> has been run with the <code>inplace=True</code> argument:</p>
<div class="cell" data-layout-align="center">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>country_df.sort_values(by<span class="op">=</span><span class="st">'pop'</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>country_df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>      name   pop
0  Albania   2.8
2   Angola  34.5
1  Algeria  44.2</code></pre>
</div>
</div>
<p>Since this is the behavior most students/data scientists intuitively expect anyways, you will eventually get in the habit of adding <code>inplace=True</code> to most of your calls to Pandas functions, but it’s good to take a moment to think about this—for example, imagining some cases where you <strong>wouldn’t</strong> want Pandas to perform the operation in-place.</p>
</section>
<section id="manipulating-a-dataframe" class="level3" data-number="2.3.3">
<h3 data-number="2.3.3" class="anchored" data-anchor-id="manipulating-a-dataframe"><span class="header-section-number">2.3.3</span> Manipulating a DataFrame</h3>
<div class="cell" data-layout-align="center">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>country_df[<span class="st">'pop'</span>] <span class="op">=</span> country_df[<span class="st">'pop'</span>] <span class="op">*</span> <span class="dv">2</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>country_df[<span class="st">'name'</span>] <span class="op">=</span> country_df[<span class="st">'name'</span>].<span class="bu">str</span>.lower()</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>country_df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>      name   pop
0  albania   5.6
2   angola  69.0
1  algeria  88.4</code></pre>
</div>
</div>
<p>To understand why these two operations did <strong>not</strong> require us to use the <code>inplace=True</code> argument we discussed in the previous section, it’s important to note how the <code>=</code> operator works in Python:</p>
<div class="callout callout-style-default callout-tip callout-titled" title="The Assignment Operator">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
The Assignment Operator
</div>
</div>
<div class="callout-body-container callout-body">
<p>One good thing about <code>R</code> is the fact that it uses the syntax <code>my_var &lt;- value</code> to represent assigning <code>value</code> to the variable <code>my_var</code>. Python, on the other hand, uses the single equals sign, like <code>my_var = value</code>. Thus, when using Python, it’s important to keep in mind the different uses of the equals sign:</p>
<ul>
<li><code>=</code> is the <strong>assignment operator</strong>: it assigns the value on its right-hand side to the variable name on its left hand side</li>
<li><code>==</code> is the <strong>equality</strong> operator: it checks whether the value before it is equal to the value after it, returning <code>True</code> if they’re equal and <code>False</code> otherwise.</li>
</ul>
</div>
</div>
<p>Keep in mind that this assignment operator is evaluated from <strong>right to left</strong>: when we tell Python e.g.&nbsp;<code>x = y + 3</code>, we are telling it, “first add <code>3</code> to the value of the variable <code>y</code>, then store the result of that addition as the variable <code>x</code>.” Therefore, when we write something like <code>x = x + 3</code>, that may be confusing at first glance since <code>x</code> appears on both the left and right sides, keeping this order in mind helps clarify what’s going on: Python <strong>first</strong> adds <code>3</code> to the current value of the variable <code>x</code>, <strong>then</strong> stores the result of this addition as the variable <code>x</code> (thus overwriting the original value that it used when computing the addition).</p>
<p>So, in the case of the two operations we performed on <code>country_df</code> above—multiplying the values in the <code>pop</code> column by 2 and lowercasing all of the values in the <code>name</code> column—we don’t need to specify <code>inplace=True</code> anywhere since we’re <strong>explicitly</strong> overwriting the values in the columns using the <code>=</code> operator.</p>
<p>Now, looking at the details of how we performed these operations, note the two ways we’ve now seen to access or update <strong>rows</strong> and <strong>columns</strong> of a DataFrame:</p>
<div class="callout callout-style-default callout-tip callout-titled" title="Pandas Syntax: Accessing Columns">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Pandas Syntax: Accessing Columns
</div>
</div>
<div class="callout-body-container callout-body">
<p>In Pandas, accessing <strong>columns</strong> is the “default” way to access pieces of a DataFrame, so that all you need to do is specify the name of the DataFrame you want to access a column from, and then include the name of the column surrounded by <strong>square brackets</strong>:</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'col_name'</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled" title="Pandas Syntax: Accessing Rows">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Pandas Syntax: Accessing Rows
</div>
</div>
<div class="callout-body-container callout-body">
<p>Unlike the default column-selection operator, where we just use <code>[]</code> to specify the column we want, accessing <strong>rows</strong> in Pandas requires us to use a special <code>.loc[]</code> operator, providing a <strong>boolean expression</strong> within the square brackets which it will use to select only the rows for which the boolean expression evaluates to <code>True</code>. For example, to select only the rows of our <code>country_df</code> DataFrame where the <code>name</code> value is <code>"Algeria"</code>, we write</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>country_df.loc[country_df[<span class="st">'name'</span>] <span class="op">==</span> <span class="st">"algeria"</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Take a minute to look at how exactly this works, early on, and it will save you lots of headaches in the long run: zooming in on the expression inside the square brackets after <code>.loc</code>, we see</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>country_df[<span class="st">'name'</span>] <span class="op">==</span> <span class="st">"algeria"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This expression, on its own, goes through each row of <code>country_df</code> and checks if its <code>name</code> value is equal to <code>"algeria"</code>. If it is, the expression stores a value of <code>True</code> at that row’s index, and <code>False</code> otherwise. Therefore, since the full <code>name</code> column consists of the values <code>["albania","algeria","angola"]</code>, the result of the above boolean expression will be <code>[False, False, True]</code>. Our original, full expression:</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>country_df[country_df[<span class="st">'name'</span>] <span class="op">==</span> <span class="st">"algeria"</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>will therefore know (by looking at the <code>[False, False, True]</code> result of the expression inside the square brackets after <code>.loc</code>) to only include the third row, giving us the following result:</p>
<div class="cell" data-layout-align="center">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>country_df.loc[country_df[<span class="st">'name'</span>] <span class="op">==</span> <span class="st">"algeria"</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>      name   pop
1  algeria  88.4</code></pre>
</div>
</div>
</div>
</div>
</section>
</section>
<section id="r-readr-tibbles-and-dplyr" class="level2" data-number="2.4">
<h2 data-number="2.4" class="anchored" data-anchor-id="r-readr-tibbles-and-dplyr"><span class="header-section-number">2.4</span> <code>R</code>: <code>readr</code>, Tibbles, and <code>dplyr</code></h2>


<div id="refs" class="references csl-bib-body hanging-indent" role="list" style="display: none">
<div id="ref-jurafsky_speech_2023" class="csl-entry" role="listitem">
Jurafsky, Daniel, and James H. Martin. 2023. <em>Speech and <span>Language Processing</span>. <span>An Introduction</span> to <span>Natural Language Processing</span>, <span>Computational Linguistics</span>, and <span>Speech Recognition</span></em>. <span>Youcanprint</span>.
</div>
</div>
</section>
<aside id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes">
<hr>
<ol>
<li id="fn1"><p>A third language that is increasingly being used by data scientists is JavaScript/TypeScript, which is especially nice to know since it is the canonical language for <strong>web development</strong> as well. For examples of beautiful data visualizations using the d3.js library, see <a href="https://d3-graph-gallery.com/" target="_blank">The D3 Graph Gallery</a>.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</aside>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        for (let i = 0; i < 2; i++) {
          container.appendChild(note.children[i].cloneNode(true));
        }
        return container.innerHTML
      } else {
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      return note.innerHTML;
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./ch01.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introduction</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./ch03.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Data Gathering and APIs</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">
<p>© 2023 Jeff Jacobs</p>
</div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>




</body></html>